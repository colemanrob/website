<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Other | Rob Coleman</title>
    <link>/tag/other/</link>
      <atom:link href="/tag/other/index.xml" rel="self" type="application/rss+xml" />
    <description>Other</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© 2017 - 2020 Rob Coleman</copyright><lastBuildDate>Sun, 05 Jul 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hudbb411c2d94366f168d6aa78f52f5e7d_25002_512x512_fill_lanczos_center_2.png</url>
      <title>Other</title>
      <link>/tag/other/</link>
    </image>
    
    <item>
      <title>Making Tables Again</title>
      <link>/post/making-tables-again/</link>
      <pubDate>Sun, 05 Jul 2020 00:00:00 +0000</pubDate>
      <guid>/post/making-tables-again/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/core-js/shim.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/react/react.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/react/react-dom.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/reactwidget/react-tools.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/rmarkdown-libs/reactable-binding/reactable.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;Previously I took a look at the &lt;code&gt;gt&lt;/code&gt; package. Now I’m seeing what I can make of &lt;code&gt;reactables&lt;/code&gt; another interesting way to generate html tables. I’ll be using the latest tidytues dataset on x-men!&lt;/p&gt;
&lt;p&gt;Load in the data&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;character_visualization &amp;lt;- readr::read_csv(&amp;#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-06-30/character_visualization.csv&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Make a table. I’ll note I’m not digging too deep into the x-men content here; I’m just looking for an easy table structure.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;top_speech &amp;lt;- character_visualization %&amp;gt;% 
  filter(!(character %in% c(&amp;quot;Editor narration&amp;quot;, &amp;quot;Omnipresent narration&amp;quot;))) %&amp;gt;% 
  group_by(character) %&amp;gt;% 
  summarize(across(speech:depicted, sum)) %&amp;gt;% 
  slice_max(order_by = speech, n = 15) %&amp;gt;% 
  separate(character, into = c(&amp;quot;hero&amp;quot;, &amp;quot;real_name&amp;quot;), sep = &amp;quot; = &amp;quot;) %&amp;gt;% 
  mutate(pct_speech = speech/sum(speech)) %&amp;gt;% 
  arrange(desc(pct_speech)) %&amp;gt;% 
  select(-real_name) %&amp;gt;% 
  select(hero, pct_speech, everything()) %&amp;gt;% 
  mutate(pct_speech = round(pct_speech, 3))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I added this css after the fact.&lt;/p&gt;
&lt;pre class=&#34;css&#34;&gt;&lt;code&gt;
.x-men {
  margin: 0 auto;
  width: 750px;
  font-family: Karla, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif;
  font-size: 14px;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;style type=&#34;text/css&#34;&gt;

.x-men {
  margin: 0 auto;
  width: 750px;
  font-family: Karla, &#34;Helvetica Neue&#34;, Helvetica, Arial, sans-serif;
  font-size: 14px;
}

&lt;/style&gt;
&lt;p&gt;Render the table&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(reactable)
library(htmltools)


# Render a bar chart with a label on the left
bar_chart &amp;lt;- function(label, 
                      width = &amp;quot;100%&amp;quot;, 
                      height = &amp;quot;14px&amp;quot;, 
                      fill = &amp;quot;#00bfc4&amp;quot;, 
                      background = NULL) {
  bar &amp;lt;- div(style = list(background = fill, width = width, height = height))
  chart &amp;lt;- div(style = list(flexGrow = 1, marginLeft = &amp;quot;6px&amp;quot;, background = background), bar)
  div(style = list(display = &amp;quot;flex&amp;quot;, alignItems = &amp;quot;center&amp;quot;), label, chart)
}

col_groups = c(&amp;quot;speech&amp;quot;, &amp;quot;thought&amp;quot;, &amp;quot;narrative&amp;quot;, &amp;quot;depicted&amp;quot;)

reactable(top_speech,
          compact = TRUE,
          class = &amp;quot;x-men&amp;quot;,
          defaultSorted = &amp;quot;pct_speech&amp;quot;,
          highlight = TRUE,
          defaultColDef = colDef(headerClass = &amp;quot;header&amp;quot;, align = &amp;quot;left&amp;quot;),
          columnGroups = list(
            colGroup(name = &amp;quot;Representation Type&amp;quot;, columns = col_groups)
          ),
          columns = list(
            hero = colDef(name = &amp;quot;X-Men Hero&amp;quot;,
                        minWidth = 170,
                        style = list(fontWeight = 500)),
            speech = colDef(name = &amp;quot;Speech&amp;quot;,
                            format = colFormat(separators = TRUE)),
            thought = colDef(name = &amp;quot;Thought&amp;quot;,
                             format = colFormat(separators = TRUE)),
            narrative = colDef(name = &amp;quot;Narrative&amp;quot;,
                               format = colFormat(separators = TRUE)),
            depicted = colDef(name = &amp;quot;Depicted&amp;quot;,
                              format = colFormat(separators = TRUE)),
            pct_speech = colDef(
              name = &amp;quot;Proportion of Speech&amp;quot;,
              minWidth = 150,
              defaultSortOrder = &amp;quot;desc&amp;quot;,
              cell = function(value) {
              value &amp;lt;- paste0(format(value * 100, nsmall = 1), &amp;quot;%&amp;quot;)
              value &amp;lt;- format(value, width = 5, justify = &amp;quot;right&amp;quot;)
              bar_chart(value, width = value, fill = &amp;quot;#fc5185&amp;quot;, background = &amp;quot;#e1e1e1&amp;quot;)
            },
            align = &amp;quot;left&amp;quot;,
            style = list(fontFamily = &amp;quot;monospace&amp;quot;, whiteSpace = &amp;quot;pre&amp;quot;)
          )))&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; class=&#34;reactable html-widget&#34; style=&#34;width:auto;height:auto;&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;tag&#34;:{&#34;name&#34;:&#34;Reactable&#34;,&#34;attribs&#34;:{&#34;data&#34;:{&#34;hero&#34;:[&#34;Wolverine&#34;,&#34;Storm&#34;,&#34;Cyclops&#34;,&#34;Colossus&#34;,&#34;Rogue&#34;,&#34;Ariel/Sprite/Shadowcat&#34;,&#34;Nightcrawler&#34;,&#34;Psylocke&#34;,&#34;Professor X&#34;,&#34;Marvel Girl/Phoenix&#34;,&#34;Havok&#34;,&#34;Dazzler&#34;,&#34;Forge&#34;,&#34;Magneto&#34;,&#34;Phoenix(2)&#34;],&#34;pct_speech&#34;:[0.157,0.152,0.089,0.078,0.078,0.073,0.064,0.05,0.049,0.041,0.039,0.038,0.035,0.028,0.028],&#34;speech&#34;:[3640,3517,2052,1800,1800,1690,1492,1163,1128,957,902,875,818,651,651],&#34;thought&#34;:[532,1900,729,461,611,737,441,159,269,195,238,565,131,74,469],&#34;narrative&#34;:[352,99,193,6,49,66,6,109,175,2,172,5,118,176,40],&#34;depicted&#34;:[3537,4169,2223,2712,1603,1714,1839,993,1095,1012,779,896,588,552,680]},&#34;columns&#34;:[{&#34;accessor&#34;:&#34;hero&#34;,&#34;name&#34;:&#34;X-Men Hero&#34;,&#34;type&#34;:&#34;character&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;minWidth&#34;:170,&#34;style&#34;:{&#34;fontWeight&#34;:500}},{&#34;accessor&#34;:&#34;pct_speech&#34;,&#34;name&#34;:&#34;Proportion of Speech&#34;,&#34;type&#34;:&#34;numeric&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;defaultSortDesc&#34;:true,&#34;cell&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34;15.7%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34;15.7%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34;15.2%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34;15.2%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 8.9%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 8.9%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 7.8%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 7.8%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 7.8%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 7.8%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 7.3%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 7.3%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 6.4%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 6.4%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 5.0%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 5.0%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 4.9%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 4.9%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 4.1%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 4.1%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 3.9%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 3.9%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 3.8%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 3.8%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 3.5%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 3.5%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 2.8%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 2.8%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]},{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;display&#34;:&#34;flex&#34;,&#34;alignItems&#34;:&#34;center&#34;}},&#34;children&#34;:[&#34; 2.8%&#34;,{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;flexGrow&#34;:1,&#34;marginLeft&#34;:&#34;6px&#34;,&#34;background&#34;:&#34;#e1e1e1&#34;}},&#34;children&#34;:[{&#34;name&#34;:&#34;div&#34;,&#34;attribs&#34;:{&#34;style&#34;:{&#34;background&#34;:&#34;#fc5185&#34;,&#34;width&#34;:&#34; 2.8%&#34;,&#34;height&#34;:&#34;14px&#34;}},&#34;children&#34;:[]}]}]}],&#34;minWidth&#34;:150,&#34;style&#34;:{&#34;fontFamily&#34;:&#34;monospace&#34;,&#34;whiteSpace&#34;:&#34;pre&#34;}},{&#34;accessor&#34;:&#34;speech&#34;,&#34;name&#34;:&#34;Speech&#34;,&#34;type&#34;:&#34;numeric&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;format&#34;:{&#34;cell&#34;:{&#34;separators&#34;:true},&#34;aggregated&#34;:{&#34;separators&#34;:true}}},{&#34;accessor&#34;:&#34;thought&#34;,&#34;name&#34;:&#34;Thought&#34;,&#34;type&#34;:&#34;numeric&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;format&#34;:{&#34;cell&#34;:{&#34;separators&#34;:true},&#34;aggregated&#34;:{&#34;separators&#34;:true}}},{&#34;accessor&#34;:&#34;narrative&#34;,&#34;name&#34;:&#34;Narrative&#34;,&#34;type&#34;:&#34;numeric&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;format&#34;:{&#34;cell&#34;:{&#34;separators&#34;:true},&#34;aggregated&#34;:{&#34;separators&#34;:true}}},{&#34;accessor&#34;:&#34;depicted&#34;,&#34;name&#34;:&#34;Depicted&#34;,&#34;type&#34;:&#34;numeric&#34;,&#34;align&#34;:&#34;left&#34;,&#34;headerClassName&#34;:&#34;header&#34;,&#34;format&#34;:{&#34;cell&#34;:{&#34;separators&#34;:true},&#34;aggregated&#34;:{&#34;separators&#34;:true}}}],&#34;columnGroups&#34;:[{&#34;name&#34;:&#34;Representation Type&#34;,&#34;columns&#34;:[&#34;speech&#34;,&#34;thought&#34;,&#34;narrative&#34;,&#34;depicted&#34;]}],&#34;defaultSorted&#34;:[{&#34;id&#34;:&#34;pct_speech&#34;,&#34;desc&#34;:true}],&#34;defaultPageSize&#34;:10,&#34;paginationType&#34;:&#34;numbers&#34;,&#34;showPageInfo&#34;:true,&#34;minRows&#34;:1,&#34;highlight&#34;:true,&#34;compact&#34;:true,&#34;className&#34;:&#34;x-men&#34;,&#34;dataKey&#34;:&#34;768eefd78e4edb491da5b639010dafbb&#34;},&#34;children&#34;:[]},&#34;class&#34;:&#34;reactR_markup&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;It’s super buggy using &lt;code&gt;blogdown&lt;/code&gt;. At first I couldn’t render the table using a .Rmarkdown file. Once I switched to an .Rmd it seemed to work. Seems like a great table making library.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Making Tables</title>
      <link>/post/making-tables/</link>
      <pubDate>Sun, 28 Jun 2020 00:00:00 +0000</pubDate>
      <guid>/post/making-tables/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve wanted to dive into the 
&lt;a href=&#34;https://gt.rstudio.com/index.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;gt&lt;/a&gt; package for making tables for awhile now.  Here is a quick example of a table using data from a tidy tuesday a few weeks back.  It seems my hugo theme is over-writing some of the table css, I&amp;rsquo;ll have to check that out.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tidyverse)

library(gt)
&lt;/code&gt;&lt;/pre&gt;
&lt;style type=&#34;text/css&#34;&gt;
table&gt;tbody&gt;tr:nth-child(odd)&gt;td, table&gt;tbody&gt;tr:nth-child(odd)&gt;th {
    background-color: #fff;
}
table &gt; tbody &gt; tr:hover &gt; td,
table &gt; tbody &gt; tr:hover &gt; th {
  background-color: #fff;
}
.article-style img, .article-style video {
  height: auto;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0;
  margin-bottom: 0;
  padding: 0;
}
&lt;/style&gt;
&lt;p&gt;Let&amp;rsquo;s read in the cocktails recipie&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;boston_cocktails &amp;lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-26/boston_cocktails.csv&#39;) %&amp;gt;% 
  janitor::clean_names()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&amp;rsquo;s make the data reasonable!&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;boston_tidy &amp;lt;- boston_cocktails %&amp;gt;% 
  # fix the measurements
  separate(measure, into = c(&#39;value&#39;, &#39;measurement&#39;), sep = &amp;quot; &amp;quot;, remove = FALSE) %&amp;gt;% 
  # remove values that don&#39;t have properly formed measurements crudely
  filter(measurement == &amp;quot;oz&amp;quot;) %&amp;gt;% 
  # convert fractions to decimals
  mutate(value = case_when(
    value == &amp;quot;1/2&amp;quot; ~ &amp;quot;.5&amp;quot;,
    value == &amp;quot;1/3&amp;quot; ~ &amp;quot;.33&amp;quot;,
    value == &amp;quot;1/4&amp;quot; ~ &amp;quot;.25&amp;quot;,
    value == &amp;quot;3/4&amp;quot; ~ &amp;quot;.74&amp;quot;,
    TRUE ~ value
  )) %&amp;gt;% 
  # magic
  type_convert() %&amp;gt;% 
  # only keep realistic values
  filter(value &amp;lt;= 5)

boston_table &amp;lt;- boston_tidy%&amp;gt;% 
  filter(!category %in% c(&#39;Non-alcoholic Drinks&#39;, &#39;Rum&#39;, &#39;Shooters&#39;)) %&amp;gt;% 
  group_by(category, name) %&amp;gt;% 
  summarize(total_ingredients = which.max(ingredient_number),
            total_ounces = sum(value)) %&amp;gt;% 
  arrange(category, desc(total_ingredients)) %&amp;gt;% 
  slice_head(n = 5, order_by = total_ingredients) %&amp;gt;% 
  arrange(category) %&amp;gt;% 
  ungroup()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;make the table&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;boston_gt_table &amp;lt;- gt(boston_table, 
                      rowname_col = &amp;quot;name&amp;quot;,
                      groupname_col = &amp;quot;category&amp;quot;)


boston_gt_table &amp;lt;- boston_gt_table %&amp;gt;% 
  tab_header(
    title = &amp;quot;Top cocktails by Category&amp;quot;,
    subtitle = &amp;quot;Top 5 cocktails based on number of ingredients&amp;quot;
  ) %&amp;gt;% 
  tab_spanner(label = &amp;quot;Drink Information&amp;quot;,
              columns = vars(&amp;quot;total_ingredients&amp;quot;, &amp;quot;total_ounces&amp;quot;)) %&amp;gt;% 
  cols_label(
    total_ingredients = &amp;quot;Total Ingredients&amp;quot;,
    total_ounces = &amp;quot;Total Ounces&amp;quot;,
    name = &amp;quot;Name&amp;quot;
  ) %&amp;gt;% 
  summary_rows(
    groups = TRUE,
    columns = vars(total_ingredients, total_ounces),
    fns = list(Total = &amp;quot;sum&amp;quot;),
    formatter = fmt_number,
    decimals = 2,
    use_seps = TRUE
  ) 

boston_gt_table %&amp;gt;% 
  tab_source_note(
    source_note = md(&amp;quot;Data comes from the [Tidy Tuesday project](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-26/readme.md)&amp;quot;)
  ) %&amp;gt;% 
  opt_align_table_header(align = &amp;quot;center&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;!--html_preserve--&gt;&lt;style&gt;html {
&lt;p&gt;font-family: -apple-system, BlinkMacSystemFont, &amp;lsquo;Segoe UI&amp;rsquo;, Roboto, Oxygen, Ubuntu, Cantarell, &amp;lsquo;Helvetica Neue&amp;rsquo;, &amp;lsquo;Fira Sans&amp;rsquo;, &amp;lsquo;Droid Sans&amp;rsquo;, Arial, sans-serif;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_table {
display: table;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
color: #333333;
font-size: 16px;
background-color: #FFFFFF;
width: auto;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #A8A8A8;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #A8A8A8;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_heading {
background-color: #FFFFFF;
text-align: center;
border-bottom-color: #FFFFFF;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_title {
color: #333333;
font-size: 125%;
font-weight: initial;
padding-top: 4px;
padding-bottom: 4px;
border-bottom-color: #FFFFFF;
border-bottom-width: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_subtitle {
color: #333333;
font-size: 85%;
font-weight: initial;
padding-top: 0;
padding-bottom: 4px;
border-top-color: #FFFFFF;
border-top-width: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_bottom_border {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_col_headings {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_col_heading {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
padding-left: 5px;
padding-right: 5px;
overflow-x: hidden;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_column_spanner_outer {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: normal;
text-transform: inherit;
padding-top: 0;
padding-bottom: 0;
padding-left: 4px;
padding-right: 4px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_column_spanner_outer:first-child {
padding-left: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_column_spanner_outer:last-child {
padding-right: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_column_spanner {
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: bottom;
padding-top: 5px;
padding-bottom: 6px;
overflow-x: hidden;
display: inline-block;
width: 100%;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_group_heading {
padding: 8px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_empty_group_heading {
padding: 0.5px;
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
vertical-align: middle;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_striped {
background-color: rgba(128, 128, 128, 0.05);
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_from_md &amp;gt; :first-child {
margin-top: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_from_md &amp;gt; :last-child {
margin-bottom: 0;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
margin: 10px;
border-top-style: solid;
border-top-width: 1px;
border-top-color: #D3D3D3;
border-left-style: none;
border-left-width: 1px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 1px;
border-right-color: #D3D3D3;
vertical-align: middle;
overflow-x: hidden;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_stub {
color: #333333;
background-color: #FFFFFF;
font-size: 100%;
font-weight: initial;
text-transform: inherit;
border-right-style: solid;
border-right-width: 2px;
border-right-color: #D3D3D3;
padding-left: 12px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_first_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_grand_summary_row {
color: #333333;
background-color: #FFFFFF;
text-transform: inherit;
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_first_grand_summary_row {
padding-top: 8px;
padding-bottom: 8px;
padding-left: 5px;
padding-right: 5px;
border-top-style: double;
border-top-width: 6px;
border-top-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_table_body {
border-top-style: solid;
border-top-width: 2px;
border-top-color: #D3D3D3;
border-bottom-style: solid;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_footnotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_footnote {
margin: 0px;
font-size: 90%;
padding: 4px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_sourcenotes {
color: #333333;
background-color: #FFFFFF;
border-bottom-style: none;
border-bottom-width: 2px;
border-bottom-color: #D3D3D3;
border-left-style: none;
border-left-width: 2px;
border-left-color: #D3D3D3;
border-right-style: none;
border-right-width: 2px;
border-right-color: #D3D3D3;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_sourcenote {
font-size: 90%;
padding: 4px;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_left {
text-align: left;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_center {
text-align: center;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_right {
text-align: right;
font-variant-numeric: tabular-nums;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_font_normal {
font-weight: normal;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_font_bold {
font-weight: bold;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_font_italic {
font-style: italic;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_super {
font-size: 65%;
}&lt;/p&gt;
&lt;p&gt;#jrihnhzhfn .gt_footnote_marks {
font-style: italic;
font-size: 65%;
}
&lt;/style&gt;&lt;/p&gt;
&lt;div id=&#34;jrihnhzhfn&#34; style=&#34;overflow-x:auto;overflow-y:auto;width:auto;height:auto;&#34;&gt;&lt;table class=&#34;gt_table&#34;&gt;
  &lt;thead class=&#34;gt_header&#34;&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;3&#34; class=&#34;gt_heading gt_title gt_font_normal&#34; style&gt;Top cocktails by Category&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;3&#34; class=&#34;gt_heading gt_subtitle gt_font_normal gt_bottom_border&#34; style&gt;Top 5 cocktails based on number of ingredients&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;thead class=&#34;gt_col_headings&#34;&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;2&#34; colspan=&#34;1&#34;&gt;&lt;/th&gt;
      &lt;th class=&#34;gt_center gt_columns_top_border gt_column_spanner_outer&#34; rowspan=&#34;1&#34; colspan=&#34;2&#34;&gt;
        &lt;span class=&#34;gt_column_spanner&#34;&gt;Drink Information&lt;/span&gt;
      &lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_center&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Total Ingredients&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_center&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Total Ounces&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody class=&#34;gt_table_body&#34;&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Brandy&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Champs Elysees Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Cherry Blossom&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;2.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;D&#39;artagnan&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Deauville Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;3.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Gilroy Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;3.48&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;25.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;19.48&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Cocktail Classics&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Eye-Opener&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Gloom Lifter&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Hyatt&#39;s Jamaican Banana&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;New Orleans Gin Fizz&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Prairie Oyster Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;30.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;28.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Cordials and Liqueurs&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Praire Oyster Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Absinthe Special Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;2&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.25&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Amaretto Rose&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;2&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Amaretto Sour&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;2&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Amber Amour&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;2&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;13.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;8.99&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Gin&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;The Winkle&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;11.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Vow Of Silence&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;2.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;The Wink&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;4&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Water Lily&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;4&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;2.96&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Western Rose&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;4&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;3.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;23.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;23.70&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Rum - Daiquiris&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Hai Karate&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;7.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Ko Adang&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Zombie&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;7.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Floridita No. 3&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Hush and Wonder&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;5&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;7.48&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;28.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;30.72&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Tequila&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Amante Picante&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;10.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Chupa Cabra&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Flower Power&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;9.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Oldest Temptation&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.25&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;The Nomad South&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;30.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;35.49&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Vodka&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Ibiza&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Long Island Iced Tea&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.20&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Purple Passion Iced Tea&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;3.24&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Sonic Blaster&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;4.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Thyme Collins&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;10.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;30.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;27.44&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;3&#34; class=&#34;gt_group_heading&#34;&gt;Whiskies&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Blarney Stone Cocktail&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;California Lemonade&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.25&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Carre Reprise&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.50&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Chi-Town Flip&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;5.47&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Double Standard Sour&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;6&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;3.73&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_stub gt_right gt_summary_row gt_first_summary_row&#34;&gt;Total&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center gt_summary_row gt_first_summary_row&#34;&gt;30.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right gt_summary_row gt_first_summary_row&#34;&gt;26.45&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot class=&#34;gt_sourcenotes&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_sourcenote&#34; colspan=&#34;3&#34;&gt;Data comes from the &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-26/readme.md&#34;&gt;Tidy Tuesday project&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
&lt;/table&gt;&lt;/div&gt;&lt;!--/html_preserve--&gt;
&lt;p&gt;More to come!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Notes on fuzzy matching</title>
      <link>/post/notes-on-fuzzy-matching/</link>
      <pubDate>Sat, 05 Oct 2019 00:00:00 +0000</pubDate>
      <guid>/post/notes-on-fuzzy-matching/</guid>
      <description>&lt;p&gt;Recently had the pleasure of fuzzy matching two datasets that included first and last name and date of birth.  Here are some notes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&#34;https://github.com/dgrtwo/fuzzyjoin&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;fuzzyjoin package&lt;/a&gt; - great functions that do most of the heavy lifting&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;http://finzi.psych.upenn.edu/library/stringdist/html/stringdist-metrics.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;string metrics&lt;/a&gt; - there are a lot of ways to measure the difference in strings, selecting a metric depends on the problem&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;toy-example&#34;&gt;Toy Example&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tidyverse)
library(fuzzyjoin)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Create our list of names and dobs.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;inside_list &amp;lt;- tribble(
  ~first, ~last, ~dob,
  &amp;quot;frank&amp;quot;, &amp;quot;johnson&amp;quot;, &amp;quot;1980-01-01&amp;quot;,
  &amp;quot;debbie&amp;quot;, &amp;quot;willis&amp;quot;, &amp;quot;1982-01-01&amp;quot;
) %&amp;gt;% mutate(dob = parse_date(dob, format = &amp;quot;%Y-%m-%d&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Create a second list to be matched against&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;outside_list &amp;lt;- tribble(
  ~first, ~last, ~dob,
  &amp;quot;frank&amp;quot;, &amp;quot;johnson&amp;quot;, &amp;quot;1980-01-01&amp;quot;,
  &amp;quot;debrah&amp;quot;, &amp;quot;willis&amp;quot;, &amp;quot;1982-01-02&amp;quot;
) %&amp;gt;% mutate(dob = parse_date(dob, format = &amp;quot;%Y-%m-%d&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Use the function of your choice.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;stringdist_join(outside_list, inside_list,
                by = c(&amp;quot;first&amp;quot;, &amp;quot;last&amp;quot;, &amp;quot;dob&amp;quot;),
                ignore_case = TRUE,
                distance_col = &amp;quot;dist&amp;quot;,
                mode = &amp;quot;left&amp;quot;,
                method = &amp;quot;lv&amp;quot;,
                max_dist = 20) %&amp;gt;% 
  mutate(total_distance = dob.dist + first.dist + last.dist) %&amp;gt;% 
  select(-ends_with(&amp;quot;.dist&amp;quot;)) %&amp;gt;% 
  knitr::kable()
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;first.x&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;last.x&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;dob.x&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;first.y&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;last.y&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;dob.y&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;dist&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;total_distance&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;frank&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;johnson&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1980-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;frank&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;johnson&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1980-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;frank&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;johnson&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1980-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;debbie&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;willis&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1982-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;14&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;debrah&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;willis&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1982-01-02&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;frank&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;johnson&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1980-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;14&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;debrah&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;willis&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1982-01-02&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;debbie&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;willis&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1982-01-01&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;You can see the difference between &lt;em&gt;debrah&lt;/em&gt; and &lt;em&gt;debbie&lt;/em&gt; is 4.&lt;/p&gt;
&lt;p&gt;Setting the distance threshold is often a function of how exact you want the matches to be.&lt;/p&gt;
&lt;p&gt;See the 
&lt;a href=&#34;http://varianceexplained.org/fuzzyjoin/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;fuzzyjoin&lt;/a&gt; reference for more.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
